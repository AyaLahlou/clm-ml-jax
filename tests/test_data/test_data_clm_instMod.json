{
  "function_name": "clm_instInit_and_related_functions",
  "test_cases": [
    {
      "name": "test_nominal_single_grid_cell",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 1,
          "begl": 1,
          "endl": 1,
          "begc": 1,
          "endc": 1,
          "begp": 1,
          "endp": 1
        }
      },
      "metadata": {
        "type": "nominal",
        "description": "Tests initialization with a single grid cell, typical for unit testing individual cells",
        "edge_cases": []
      }
    },
    {
      "name": "test_nominal_small_domain",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 10,
          "begl": 1,
          "endl": 10,
          "begc": 1,
          "endc": 15,
          "begp": 1,
          "endp": 20
        }
      },
      "metadata": {
        "type": "nominal",
        "description": "Tests initialization with a small domain (10 grid cells, 15 columns, 20 patches)",
        "edge_cases": []
      }
    },
    {
      "name": "test_nominal_medium_domain",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 100,
          "begl": 1,
          "endl": 100,
          "begc": 1,
          "endc": 250,
          "begp": 1,
          "endp": 500
        }
      },
      "metadata": {
        "type": "nominal",
        "description": "Tests initialization with a medium-sized domain typical of regional simulations",
        "edge_cases": []
      }
    },
    {
      "name": "test_nominal_large_domain",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 1000,
          "begl": 1,
          "endl": 1000,
          "begc": 1,
          "endc": 3000,
          "begp": 1,
          "endp": 6000
        }
      },
      "metadata": {
        "type": "nominal",
        "description": "Tests initialization with a large domain typical of global simulations",
        "edge_cases": []
      }
    },
    {
      "name": "test_nominal_non_unit_start_indices",
      "inputs": {
        "bounds": {
          "begg": 101,
          "endg": 200,
          "begl": 101,
          "endl": 200,
          "begc": 301,
          "endc": 500,
          "begp": 501,
          "endp": 1000
        }
      },
      "metadata": {
        "type": "nominal",
        "description": "Tests initialization with non-unit starting indices, typical of domain decomposition",
        "edge_cases": []
      }
    },
    {
      "name": "test_edge_zero_size_domain",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 0,
          "begl": 1,
          "endl": 0,
          "begc": 1,
          "endc": 0,
          "begp": 1,
          "endp": 0
        }
      },
      "metadata": {
        "type": "edge",
        "description": "Tests handling of zero-size domain (empty domain)",
        "edge_cases": [
          "zero_size"
        ]
      }
    },
    {
      "name": "test_edge_single_column_multiple_patches",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 1,
          "begl": 1,
          "endl": 1,
          "begc": 1,
          "endc": 1,
          "begp": 1,
          "endp": 10
        }
      },
      "metadata": {
        "type": "edge",
        "description": "Tests edge case where single column has multiple patches (e.g., multiple PFTs)",
        "edge_cases": [
          "boundary_ratio"
        ]
      }
    },
    {
      "name": "test_edge_maximum_hierarchy_ratio",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 1,
          "begl": 1,
          "endl": 1,
          "begc": 1,
          "endc": 100,
          "begp": 1,
          "endp": 1000
        }
      },
      "metadata": {
        "type": "edge",
        "description": "Tests extreme hierarchy ratio (1 grid -> 100 columns -> 1000 patches)",
        "edge_cases": [
          "extreme_hierarchy"
        ]
      }
    },
    {
      "name": "test_special_restart_define_flag",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 50,
          "begl": 1,
          "endl": 50,
          "begc": 1,
          "endc": 100,
          "begp": 1,
          "endp": 200
        },
        "ncid": "mock_netcdf_id_12345",
        "flag": "define"
      },
      "metadata": {
        "type": "special",
        "description": "Tests clm_instRest with 'define' flag for restart file definition phase",
        "edge_cases": []
      }
    },
    {
      "name": "test_special_restart_write_flag",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 50,
          "begl": 1,
          "endl": 50,
          "begc": 1,
          "endc": 100,
          "begp": 1,
          "endp": 200
        },
        "ncid": "mock_netcdf_id_67890",
        "flag": "write"
      },
      "metadata": {
        "type": "special",
        "description": "Tests clm_instRest with 'write' flag for writing restart data",
        "edge_cases": []
      }
    },
    {
      "name": "test_special_restart_read_flag",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 50,
          "begl": 1,
          "endl": 50,
          "begc": 1,
          "endc": 100,
          "begp": 1,
          "endp": 200
        },
        "ncid": "mock_netcdf_id_11111",
        "flag": "read"
      },
      "metadata": {
        "type": "special",
        "description": "Tests clm_instRest with 'read' flag for reading restart data",
        "edge_cases": []
      }
    },
    {
      "name": "test_special_get_instance_all_valid_names",
      "inputs": {
        "instance_names": [
          "atm2lnd_inst",
          "soilstate_inst",
          "waterstate_inst",
          "canopystate_inst",
          "temperature_inst",
          "energyflux_inst",
          "waterflux_inst",
          "frictionvel_inst",
          "surfalb_inst",
          "solarabs_inst",
          "mlcanopy_inst"
        ]
      },
      "metadata": {
        "type": "special",
        "description": "Tests get_instance with all valid instance names",
        "edge_cases": []
      }
    },
    {
      "name": "test_edge_get_instance_invalid_name",
      "inputs": {
        "instance_name": "invalid_instance_name"
      },
      "metadata": {
        "type": "edge",
        "description": "Tests get_instance with an invalid instance name (should return None)",
        "edge_cases": [
          "invalid_input"
        ]
      }
    },
    {
      "name": "test_special_validate_instances_after_init",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 25,
          "begl": 1,
          "endl": 25,
          "begc": 1,
          "endc": 50,
          "begp": 1,
          "endp": 100
        }
      },
      "metadata": {
        "type": "special",
        "description": "Tests validate_instances after initialization to ensure all instances are properly created",
        "edge_cases": []
      }
    },
    {
      "name": "test_edge_validate_instances_before_init",
      "inputs": {
        "bounds": {
          "begg": 1,
          "endg": 10,
          "begl": 1,
          "endl": 10,
          "begc": 1,
          "endc": 20,
          "begp": 1,
          "endp": 40
        }
      },
      "metadata": {
        "type": "edge",
        "description": "Tests validate_instances before initialization (should return False)",
        "edge_cases": [
          "uninitialized_state"
        ]
      }
    }
  ],
  "additional_test_scenarios": {
    "state_transition_tests": [
      {
        "name": "test_reset_and_reinitialize",
        "description": "Tests reset_instances followed by clm_instInit to ensure clean reinitialization",
        "sequence": [
          "reset_instances",
          "clm_instInit",
          "validate_instances"
        ]
      },
      {
        "name": "test_multiple_initializations",
        "description": "Tests behavior when clm_instInit is called multiple times without reset",
        "sequence": [
          "clm_instInit",
          "clm_instInit",
          "validate_instances"
        ]
      }
    ],
    "integration_tests": [
      {
        "name": "test_full_restart_cycle",
        "description": "Tests complete restart cycle: init -> define -> write -> reset -> init -> read",
        "sequence": [
          "clm_instInit",
          "clm_instRest(define)",
          "clm_instRest(write)",
          "reset_instances",
          "clm_instInit",
          "clm_instRest(read)"
        ]
      }
    ]
  },
  "mock_data_requirements": {
    "bounds_type": {
      "description": "Mock bounds_type structure with integer indices",
      "required_fields": [
        "begg",
        "endg",
        "begl",
        "endl",
        "begc",
        "endc",
        "begp",
        "endp"
      ],
      "constraints": [
        "begg <= endg",
        "begl <= endl",
        "begc <= endc",
        "begp <= endp",
        "Typically: num_gridcells <= num_landunits <= num_columns <= num_patches"
      ]
    },
    "component_type_mocks": {
      "description": "Mock objects for all 11 component types",
      "types": [
        "atm2lnd_type",
        "soilstate_type",
        "waterstate_type",
        "canopystate_type",
        "temperature_type",
        "energyflux_type",
        "waterflux_type",
        "frictionvel_type",
        "surfalb_type",
        "solarabs_type",
        "mlcanopy_type"
      ],
      "requirements": [
        "Each type should have appropriate constructor accepting bounds",
        "mlcanopy_type should have a restart() method for clm_instRest testing",
        "All types should be distinguishable for validation"
      ]
    }
  },
  "notes": "Test data generated for CLM instance management module. The bounds structure represents the hierarchical decomposition of the CLM domain: gridcells -> landunits -> columns -> patches. Test cases cover: (1) Nominal cases with various domain sizes from single cell to large global domains, (2) Edge cases including zero-size domains, extreme hierarchy ratios, and boundary conditions, (3) Special cases for restart operations with all three flags (define/write/read), instance retrieval, and validation. The module manages global state, so tests should be designed to run in isolation or with proper setup/teardown. Mock objects are required for all component types and the bounds structure. Tests should verify: proper initialization order, global state updates, instance retrieval, validation logic, and restart functionality. Physical constraints: grid hierarchy should be consistent (begg <= endg, etc.), and typically the number of sub-units increases at each level (gridcells <= landunits <= columns <= patches). The zero-size domain test is an edge case that may require special handling. Integration tests should verify state transitions and the complete restart cycle."
}